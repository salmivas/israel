"use strict";!function(){var e=document.querySelector("body"),t=document.querySelector(".modal-feedback"),n=document.querySelector(".modal-accepted"),a=document.querySelector(".call-back"),i={LONG:"Escape",SHORT:"Esc"},s=function(e){var t;return window.masks.forEach(function(n){n.el.input===e&&(t=n.unmaskedValue)}),t},c=function(t,n){t.classList.remove(n),e.style.overflow="hidden"},o=function(t,n){t.classList.add(n),e.style.overflow=""},l=function(t,n,a){(t.key===i.LONG||t.key===i.SHORT)&&o(n,a),e.removeEventListener("keydown",l)},r=function(e,t){localStorage.clear(),localStorage.setItem("userData",JSON.stringify({userName:e,userPhone:t}))},d=function(){if(n){var t=n.querySelector(".modal-accepted__clear-button"),a=n.querySelector(".modal-accepted__cross-button"),i=n.classList[0].concat("--hidden");e.addEventListener("keydown",function(e){l(e,n,i)}),t.addEventListener("click",function(){o(n,i)}),a.addEventListener("click",function(){o(n,i)}),window.addEventListener("click",function(e){e.target===n&&o(n,i)}),c(n,i)}};if(t){var u=document.querySelector(".modal-feedback__container"),m=document.querySelector(".header__callback"),L=document.querySelector('.modal-feedback__form button[type="reset"]'),f=document.querySelector(".modal-feedback__form form"),v=document.getElementById("modal-feedback__user-name"),p=document.getElementById("modal-feedback__user-phone"),_=document.getElementById("modal-admission"),E=t.classList[0].concat("--hidden"),S=function(){u.style.animation="shake 0.8s",setTimeout(function(){u.style.animation=""},600)};m.addEventListener("click",function(){c(t,E),setTimeout(function(){v.focus()},500),e.addEventListener("keydown",function(e){l(e,t,E)})}),window.addEventListener("click",function(e){e.target===t&&o(t,E)}),L.addEventListener("click",function(){o(t,E)}),f.addEventListener("submit",function(e){e.preventDefault();var n=s(p);_.checked&&11===n.length?(r(v.value,p.value),window.upload.post(function(){o(t,E),d()},S,new FormData(f))):n.length<11&&y(p)})}var y=function(e){var t=e.parentElement,n=t.classList[0].concat("--invalid");t.classList.add(n)};if(a){var k=document.querySelector(".call-back form"),w=document.getElementById("call-back__user-phone");k.addEventListener("submit",function(e){e.preventDefault(),s(w).length<11?y(w):(r("",w.value),window.upload.post(d,null,new FormData(k)))})}}(),function(){var e=document.querySelectorAll('input[type="tel"]');window.masks=[];for(var t=function(e){var t,n=e.parentNode,a=n.classList[0].concat("--active"),i=n.classList[0].concat("--valid"),s=n.classList[0].concat("--invalid"),c=(t=e,new window.IMask(t,{mask:"+{7} (000) 000-00-00",lazy:!0}));return c.on("accept",function(){switch(e.parentNode.classList.add(a),e.parentNode.classList.contains(s)&&e.parentNode.classList.remove(s),!0){case 0===c.unmaskedValue.length:e.parentNode.classList.remove(a);break;case 11===c.unmaskedValue.length:e.parentNode.classList.add(i);break;case c.unmaskedValue.length<11&&e.parentNode.classList.contains(i):case c.unmaskedValue.length<11:e.parentNode.classList.remove(i)}}),c},n=0;n<e.length;n++)e[n]&&masks.push(t(e[n]))}(),function(){var e,t,n,a=document.querySelectorAll(".programs__names li"),i=document.querySelectorAll(".programs__descriptions li"),s=function(e,t,n){for(var a=0;a<e.length;a++)t.call(n,e[a],a)},c=function(e){e&&s(e,function(e){e.classList.contains("visually-hidden")||e.classList.add("visually-hidden")})},o=function(e){e&&e.classList.contains("visually-hidden")&&e.classList.remove("visually-hidden")},l=function(e,t){e.classList.contains(t)||e.classList.add(t)};e=1,a&&i&&(c(i),n=e,(t=a)&&s(t,function(e){l(e,"programs__name"),l(t[n],"programs__name--checked")}),o(i[e]),s(a,function(e){e.addEventListener("click",function(){var e;(e=a)&&s(e,function(e){var t;(t=e).classList.contains("programs__name--checked")&&t.classList.remove("programs__name--checked")}),l(this,"programs__name--checked"),c(i),o(i[function(e){for(var t=0;null!=(e=e.previousSibling);)e.nodeType!=Node.TEXT_NODE&&t++;return t}(this)])})}))}(),function(){var e,t={Container:{CLASS:"activities__slider",SELECTOR:".activities__slider"},Wrapper:{CLASS:"activities__slider-list",SELECTOR:".activities__slider-list"},Slide:{CLASS:"activities__slider-item",SELECTOR:".activities__slider-item"},Pagination:{CLASS:"activities__slider-pagination",SELECTOR:".activities__slider-pagination"},BULLET_ELEMENT:"div",BULLET_CLASS:"activities__slider-bullet",BULLET_ACTIVE_CLASS:"activities__slider-bullet--active"},n={CONTAINER_INITIALIZED:"swiper-container-initialized",NO_SWIPING:"swiper-no-swiping"},a=window.matchMedia("(max-width: 767px)"),i=document.querySelector(t.Container.SELECTOR),s=document.querySelector(t.Wrapper.SELECTOR),c=function(){a.matches&&!i.classList.contains(n.CONTAINER_INITIALIZED)?(s.style.flexWrap="nowrap",(e=new Swiper(t.Container.SELECTOR,{init:!1,spaceBetween:0,wrapperClass:t.Wrapper.CLASS,slideClass:t.Slide.CLASS,pagination:{el:t.Pagination.SELECTOR,bulletElement:t.BULLET_ELEMENT,bulletClass:t.BULLET_CLASS,bulletActiveClass:t.BULLET_ACTIVE_CLASS,type:"bullets",clickable:!1}})).init()):i.classList.contains(n.CONTAINER_INITIALIZED)&&!a.matches&&e.destroy()};c(),window.addEventListener("resize",function(){c()})}(),function(){var e="POST";window.upload={post:function(t,n,a){var i=function(e,t){var n=new XMLHttpRequest;return n.responseType="json",n.addEventListener("load",function(){200===n.status?e(n.response):t()}),n}(t,n);i.open(e,"https://run.mocky.io/v3/64a5108f-2ae6-419d-ac3a-fa1129d1fab3"),i.send(a)}}}();